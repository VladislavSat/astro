<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Профессиональный Астрологический Калькулятор</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Chart.js UMD -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Глобальные заглушки CommonJS (требует Astronomy Engine) -->
  <script>
    window.exports = window.exports || {};
    window.module  = window.module  || { exports: {} };
  </script>

  <!-- ПРАВИЛЬНАЯ browser-сборка Astronomy Engine -->
  <script src="https://cdn.jsdelivr.net/npm/astronomy-engine/astronomy.browser.min.js"></script>

  <!-- Основной скрипт приложения -->
  <script src="app.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Профессиональный Астрологический Калькулятор</h1>
      <p class="subtitle">Точность ±1′ дуги</p>
    </header>

    <!-- === ФОРМА ДАННЫХ РОЖДЕНИЯ === -->
    <form id="birth-form" class="birth-form card">
      <div class="card__header"><h2>Данные рождения</h2></div>
      <div class="card__body">
        <div class="row">
          <label>Дата <input type="date" id="birth-date" required /></label>
          <label>Время <input type="time" id="birth-time" step="60" required /></label>
        </div>
        <div class="row">
          <label>Город
            <select id="city">
              <option value="moscow">Москва</option>
              <option value="spb">Санкт-Петербург</option>
              <option value="novosibirsk">Новосибирск</option>
              <option value="ekaterinburg">Екатеринбург</option>
              <option value="london">Лондон</option>
              <option value="newyork">Нью-Йорк</option>
              <option value="custom">Другой…</option>
            </select>
          </label>
          <label>Система домов
            <select id="house-system">
              <option value="placidus">Placidus</option>
              <option value="koch">Koch</option>
              <option value="equal">Equal</option>
              <option value="whole">Whole sign</option>
            </select>
          </label>
        </div>
        <div id="manual-coords" class="row">
          <label>Широта <input id="latitude"  type="number" step="0.0001"></label>
          <label>Долгота <input id="longitude" type="number" step="0.0001"></label>
          <label>Часовой пояс <input id="timezone"  type="number" step="0.5"></label>
        </div>
        <button type="submit" id="calc-btn">Рассчитать карту</button>
      </div>
    </form>

    <!-- === СЕКЦИЯ РЕЗУЛЬТАТОВ === -->
    <section id="results" class="hidden">
      <div class="card"><h3>Информация о рождении</h3><div id="birth-info"></div></div>
      <div class="card"><h3>Планеты</h3> <table id="planets"></table></div>
      <div class="card"><h3>Дома</h3>    <table id="houses"></table></div>
      <div class="card"><h3>Аспекты</h3> <table id="aspects"></table></div>

      <div class="chart-row">
        <canvas id="signs-chart"   height="350"></canvas>
        <canvas id="strength-chart" height="350"></canvas>
      </div>
    </section>
  </div>
</body>
</html>
