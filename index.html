<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Профессиональный Астрологический Калькулятор</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Заглушка CommonJS -->
  <script> window.exports = {}; window.module = { exports: {} }; </script>

  <!-- Astronomy Engine (browser-бандл).  По onload → запускаем initApp -->
  <script src="https://cdn.jsdelivr.net/npm/astronomy-engine/astronomy.browser.min.js"
          onload="window.dispatchEvent(new Event('AstroReady'))"></script>

  <!-- Основной скрипт приложения -->
  <script src="app.js" defer></script>
</head>

<body>
  <div class="container">
    <header>
      <h1>Профессиональный Астрологический Калькулятор</h1>
      <p class="subtitle">Точность ±1′ дуги (VSOP-87 + NOVAS)</p>
    </header>

    <!-- ===== Форма ввода ===== -->
    <form id="birth-form" class="card">
      <h2>Данные рождения</h2>
      <div class="row">
        <label>Дата <input type="date"  id="birth-date" required></label>
        <label>Время <input type="time" id="birth-time" step="60" required></label>
      </div>
      <div class="row">
        <label>Город
          <select id="city">
            <option value="moscow">Москва</option>
            <option value="spb">С-Петербург</option>
            <option value="london">Лондон</option>
            <option value="tokyo">Токио</option>
            <option value="custom">Другой…</option>
          </select>
        </label>
        <label>Система домов
          <select id="house-system">
            <option value="placidus">Placidus</option>
            <option value="koch">Koch</option>
            <option value="equal">Equal</option>
            <option value="whole">Whole Sign</option>
          </select>
        </label>
      </div>
      <div id="manual" class="row">
        <label>Lat <input id="latitude"  type="number" step="0.0001"></label>
        <label>Lon <input id="longitude" type="number" step="0.0001"></label>
        <label>TZ  <input id="timezone"  type="number" step="0.5"></label>
      </div>
      <button type="submit">Рассчитать карту</button>
    </form>

    <!-- ===== Результаты ===== -->
    <section id="results" class="hidden">
      <div><h3>Инфо</h3><div id="birth-info"></div></div>
      <div><h3>Планеты</h3><table id="planets"></table></div>
      <div><h3>Дома</h3>   <table id="houses"></table></div>
      <div><h3>Аспекты</h3><table id="aspects"></table></div>
      <canvas id="signs-chart" height="350"></canvas>
    </section>
  </div>
</body>
</html>
